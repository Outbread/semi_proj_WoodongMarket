<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<title>Insert title here</title>
</head>
<body>
	<div th:include="common/header.html"></div>
   <table align="center">
   <!--<form action="/post/list" method="post">
      <tr>
         <td>상품이미지</td>
         <td align="left" width="300"><input type="file" name="image"></td>
      </tr>
   </form>!-->
   <form action="/post/detail" method="post">
 	<input type="hidden" th:value="${post.postCode}" name="postCode">
 	<input type="hidden" th:value="${post.sellerCode}" name="sellerCode"> 
      <tr>
         <td>제목</td>
         <td><input type="text" name="productName" th:value="${post.productName}" style="width:500px"></td>
      </tr>
      <tr>
         <td>카테고리</td>
         <td align="left">
            <select name="categoryCode" id="categoryCode" th:value="${post.categoryCode}"></select>
          </td>
      </tr>
      <tr>
         <td>거래지역</td>
         <td align="left">
            <input type="radio" value="목동" name="location">목동</input>
            <input type="radio" value="신월동" name="location">신월동</input>
            <input type="radio" value="신정동" name="location">신정동</input>
         </td>
      </tr>
      <tr>
         <td>상품가격</td>
         <td align="left"><input type="number" style="width:150px" name="price" th:value="${post.price}"> 원</td>
      </tr>
      <tr>
         <td>상품설명</td>
         <td ><textarea style="height:250px;width:500px;" name="productContent" th:text="${post.productContent}"></textarea></td>
      </tr>
      <tr>
         <td>상품수량</td>
         <td align="left"><input type="number" name="productTotal" th:value="${post.productTotal}">개</td>
      </tr>
      <tr>
         <td>교환여부</td>
         <td align="left">
            <input type="radio" name="tradeableYn" value="O"> O
            <input type="radio" name="tradeableYn" value="X"> X
         </td>
      </tr>
      <tr>
         <td>
            <td align="right">
               <input type="submit" value="수정">
            </td>
         </td>
      </tr>
   </form>
   </table>
   
   <div th:include="common/footer.html"></div>
   
   <script>
      $(function(){
         $.ajax({
            url: "/post/category",
            success: function(data){
            	console.log(data);
               const $categoryCode = $("#categoryCode");
               $categoryCode.html("");
               
               for (let index in data){
                  $categoryCode.append($("<option>").val(data[index].categoryCode).text(data[index].categoryName));
               }
            },
            error: function(xhr){
               console.log(xhr);
            }
         });
      });
   </script>
</body>
</html>